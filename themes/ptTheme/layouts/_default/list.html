{{ define "main" }}
<style>
  .card-header{
    background: rgb(63,94,251);
    background: radial-gradient(circle, rgba(63,94,251,1) 0%, rgba(70,216,252,1) 100%);
    height: 25px;
  }
</style>

<div class="home">
    <div class="container">
           <!-- quick fix to itterate.  Can generate something better if needed -->
          {{ range (.Paginator 20).Pages }}   
            <div class="card">
             <a href="{{ .Permalink }}" class="index-anchor">    
                <div class="panel panel-default">
                  <div class="card-header">
                  </div>
                  <div class="panel-body">
                    {{ $file := .Params.datafile}}
                    {{ $index := .Params.index }}
                    {{ if $file }}
                      {{ $blindspots := getJSON $file }} 
                      {{ $blindspot := index $blindspots $index }}          
                      <h3 class="panel-title pull-left">{{ $blindspot.blindspot_name }}</h3>
                      <br />
                      <span class="post-meta pull-left"><small>*Phase*</small></span>
                    {{ end }}
                  </div>
                  
                  <div class="panel-body">
                    <small>
                      {{ .Summary | plainify | truncate 180 }}
                    </small>
                  </div>
                </div>
                </a>
            </div>
          {{ end }}
    </div> 
    
<div class="row">
    <div class="col-md-4">  </div>
    <div class="col-md-4">
        {{ if gt .Paginator.TotalPages 1 }}
        <ul class="pagination">
          {{ if .Paginator.HasPrev }}
            <li><a href="{{ .Paginator.Prev.URL }}">&laquo; Prev</a></li>
          {{ else }}
            <li><span>&laquo; Prev</span></li>
          {{ end }}

          {{ $scratch := newScratch }}
          {{ $scratch.Set "current" .Paginator.PageNumber }} 

          {{ range .Paginator.Pagers }}
            {{ if eq .PageNumber ($scratch.Get "current") }}
              <li class="active"><span><em>{{ .PageNumber }}</em></span></li>
            {{ else }}
            <li><a href="{{ .URL }}">{{ .PageNumber }}</a></li>
            {{ end }}
          {{ end }}

          {{ if .Paginator.HasNext }}
            <li><a href="{{ .Paginator.Next.URL }}">Next &raquo;</a></li>
          {{ else }}
            <li><span >Next &raquo;</span></li>
          {{ end }}
          </ul>
        {{ end }}
    </div> 
</div>
{{ end }}
